var t=document.getElementById("canvas"),i=t.getContext("2d");function m(){t.width=window.innerWidth,t.height=window.innerHeight}window.addEventListener("resize",m);m();i.fillStyle="rgb(255, 255, 255, 1)";i.beginPath();i.arc(t.width/2,t.height/2,10,0,2*Math.PI);i.fill();await new Promise(n=>setTimeout(n,1e3));var h=i.getImageData(0,0,t.width,t.height),b=1e3,w=1,o=1e8,l=new Float32Array(t.width*t.height),c=new Float32Array(t.width*t.height),g=.1,u=!1;i.fillStyle="white";i.fillRect(0,0,t.width,t.height);var f=i.getImageData(0,0,t.width,t.height);for(let n=0;n<h.data.length/4;n++){let d=h.data[4*n+3];if(d===0)continue;let I=n%h.width,y=Math.floor(n/h.width);for(let e=0;e<t.width;e++)for(let a=0;a<t.height;a++){let r=Math.hypot(b,e-t.width/2+I/o,a-t.height/2+y/o);l[e+a*t.width]+=d*Math.cos(2*Math.PI*o*r/w),c[e+a*t.width]+=d*Math.sin(2*Math.PI*o*r/w)}let s=0;for(let e=0;e<l.length;e++){let a=(l[e]*l[e]+c[e]*c[e])/255;f.data[4*e+3]=g*a,a>s&&(s=a)}u&&(g=255/s),i.putImageData(f,0,0),await new Promise(e=>setTimeout(e,0))}alert("done");
