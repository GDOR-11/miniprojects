var n1=Object.defineProperty;var i1=(r,e)=>{for(var n in e)n1(r,n,{get:e[n],enumerable:!0})};var H=`#version 300 es
precision highp float;struct Ray{vec3 origin;vec3 direction;};struct Material{vec3 albedo;vec3 emissivity;};struct Collision{float distance;vec3 normal;Material material;};struct Sphere{vec3 center;float radius;Material material;};void sphereIntersection(inout Collision current,Ray ray,Sphere sphere){vec3 oc=ray.origin-sphere.center;float b=dot(oc,ray.direction);if(b>0.0)return;float c=dot(oc,oc)-sphere.radius*sphere.radius;if(c<0.0)return;float a=dot(ray.direction,ray.direction);float d=b*b-a*c;if(d<0.0)return;float t=(-b-sqrt(d))/a;if(t>=current.distance&&current.distance>=0.0)return;current.distance=t;vec3 hitPoint=ray.origin+t*ray.direction;current.normal=(hitPoint-sphere.center)/sphere.radius;current.material=sphere.material;}Collision sceneIntersection(Ray ray){Sphere sphere1=Sphere(vec3(0.0,-1.0,5.0),1.0,Material(vec3(1.0,0.0,0.0),vec3(0.0)));Sphere sphere2=Sphere(vec3(0.0,1.0,5.0),1.0,Material(vec3(1.0,1.0,0.0),vec3(0.0)));Sphere sphere3=Sphere(vec3(5.0,5.0,0.0),1.0,Material(vec3(0.0,0.0,0.0),vec3(1.0)));Collision collision;collision.distance=-1.0;sphereIntersection(collision,ray,sphere1);sphereIntersection(collision,ray,sphere2);sphereIntersection(collision,ray,sphere3);return collision;}vec3 hash(vec3 p){p=fract(p*vec3(0.1031,0.1030,0.0973));p+=dot(p,p.yzx+33.33);return fract((p.xxy+p.yzz)*p.zyx);}vec3 randomUnitVector(vec3 seed){vec3 v=vec3(1.0);for(int i=0;length(v)>1.0||length(v)==0.0;i++){vec3 h=hash(seed+vec3(i));v=h*2.0-vec3(1.0);}return normalize(v);}float colorCorrection(float intensity){return intensity<=0.0031308?12.92*intensity:1.055*pow(intensity,1.0/2.4)-0.055;}uniform mat4 u_viewMatrix;uniform float u_time;uniform sampler2D u_lastFrame;in vec3 v_pixelLocation;out vec4 outColor;void main(){vec4 origin=u_viewMatrix*vec4(0.0,0.0,0.0,1.0);vec4 direction=u_viewMatrix*vec4(normalize(v_pixelLocation),0.0);Ray ray=Ray(origin.xyz,direction.xyz);vec3 seed=100.0*v_pixelLocation+vec3(5184.0*u_time);vec3 color=vec3(0.0);for(int i=0;i<1;i++){vec3 contribution=vec3(1.0);for(int j=0;j<3;j++){Collision collision=sceneIntersection(ray);vec3 hitPoint=ray.origin+ray.direction*collision.distance+collision.normal*0.001;if(collision.distance<0.0)break;color+=contribution*collision.material.emissivity*dot(collision.normal,-ray.direction);contribution*=collision.material.albedo;if(contribution==vec3(0.0))break;ray.origin=hitPoint;ray.direction=randomUnitVector(seed+=vec3(1423.7));if(dot(ray.direction,collision.normal)<0.0){ray.direction=-ray.direction;}}}outColor=vec4(colorCorrection(color.r),colorCorrection(color.g),colorCorrection(color.b),1.0);}`;var Z=`#version 300 es
uniform vec2 u_screenSize;out vec3 v_pixelLocation;in vec2 a_position;void main(){gl_Position=vec4(a_position,0,1);v_pixelLocation=vec3(0.5*a_position*u_screenSize,1);}`;var P=1e-6,G=typeof Float32Array<"u"?Float32Array:Array;var sr=Math.PI/180;Math.hypot||(Math.hypot=function(){for(var r=0,e=arguments.length;e--;)r+=arguments[e]*arguments[e];return Math.sqrt(r)});var W={};i1(W,{add:()=>j1,adjoint:()=>f1,clone:()=>s1,copy:()=>c1,create:()=>v1,determinant:()=>M1,equals:()=>q1,exactEquals:()=>Z1,frob:()=>B1,fromQuat:()=>T1,fromQuat2:()=>b1,fromRotation:()=>w1,fromRotationTranslation:()=>Q,fromRotationTranslationScale:()=>I1,fromRotationTranslationScaleOrigin:()=>O1,fromScaling:()=>L1,fromTranslation:()=>S1,fromValues:()=>h1,fromXRotation:()=>A1,fromYRotation:()=>P1,fromZRotation:()=>_1,frustum:()=>N1,getRotation:()=>E1,getScaling:()=>$,getTranslation:()=>R1,identity:()=>q,invert:()=>p1,lookAt:()=>W1,mul:()=>X1,multiply:()=>X,multiplyScalar:()=>k1,multiplyScalarAndAdd:()=>H1,ortho:()=>F1,orthoNO:()=>J,orthoZO:()=>V1,perspective:()=>C1,perspectiveFromFieldOfView:()=>Y1,perspectiveNO:()=>K,perspectiveZO:()=>G1,rotate:()=>y1,rotateX:()=>d1,rotateY:()=>g1,rotateZ:()=>z1,scale:()=>t1,set:()=>x1,str:()=>U1,sub:()=>Q1,subtract:()=>o,targetTo:()=>D1,translate:()=>m1,transpose:()=>l1});function v1(){var r=new G(16);return G!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function s1(r){var e=new G(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function c1(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function h1(r,e,n,i,a,v,s,h,x,c,p,M,m,f,y,t){var l=new G(16);return l[0]=r,l[1]=e,l[2]=n,l[3]=i,l[4]=a,l[5]=v,l[6]=s,l[7]=h,l[8]=x,l[9]=c,l[10]=p,l[11]=M,l[12]=m,l[13]=f,l[14]=y,l[15]=t,l}function x1(r,e,n,i,a,v,s,h,x,c,p,M,m,f,y,t,l){return r[0]=e,r[1]=n,r[2]=i,r[3]=a,r[4]=v,r[5]=s,r[6]=h,r[7]=x,r[8]=c,r[9]=p,r[10]=M,r[11]=m,r[12]=f,r[13]=y,r[14]=t,r[15]=l,r}function q(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function l1(r,e){if(r===e){var n=e[1],i=e[2],a=e[3],v=e[6],s=e[7],h=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=n,r[6]=e[9],r[7]=e[13],r[8]=i,r[9]=v,r[11]=e[14],r[12]=a,r[13]=s,r[14]=h}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}function p1(r,e){var n=e[0],i=e[1],a=e[2],v=e[3],s=e[4],h=e[5],x=e[6],c=e[7],p=e[8],M=e[9],m=e[10],f=e[11],y=e[12],t=e[13],l=e[14],d=e[15],w=n*h-i*s,L=n*x-a*s,S=n*c-v*s,g=i*x-a*h,z=i*c-v*h,I=a*c-v*x,_=p*t-M*y,b=p*l-m*y,R=p*d-f*y,O=M*l-m*t,T=M*d-f*t,N=m*d-f*l,A=w*N-L*T+S*O+g*R-z*b+I*_;return A?(A=1/A,r[0]=(h*N-x*T+c*O)*A,r[1]=(a*T-i*N-v*O)*A,r[2]=(t*I-l*z+d*g)*A,r[3]=(m*z-M*I-f*g)*A,r[4]=(x*R-s*N-c*b)*A,r[5]=(n*N-a*R+v*b)*A,r[6]=(l*S-y*I-d*L)*A,r[7]=(p*I-m*S+f*L)*A,r[8]=(s*T-h*R+c*_)*A,r[9]=(i*R-n*T-v*_)*A,r[10]=(y*z-t*S+d*w)*A,r[11]=(M*S-p*z-f*w)*A,r[12]=(h*b-s*O-x*_)*A,r[13]=(n*O-i*b+a*_)*A,r[14]=(t*L-y*g-l*w)*A,r[15]=(p*g-M*L+m*w)*A,r):null}function f1(r,e){var n=e[0],i=e[1],a=e[2],v=e[3],s=e[4],h=e[5],x=e[6],c=e[7],p=e[8],M=e[9],m=e[10],f=e[11],y=e[12],t=e[13],l=e[14],d=e[15];return r[0]=h*(m*d-f*l)-M*(x*d-c*l)+t*(x*f-c*m),r[1]=-(i*(m*d-f*l)-M*(a*d-v*l)+t*(a*f-v*m)),r[2]=i*(x*d-c*l)-h*(a*d-v*l)+t*(a*c-v*x),r[3]=-(i*(x*f-c*m)-h*(a*f-v*m)+M*(a*c-v*x)),r[4]=-(s*(m*d-f*l)-p*(x*d-c*l)+y*(x*f-c*m)),r[5]=n*(m*d-f*l)-p*(a*d-v*l)+y*(a*f-v*m),r[6]=-(n*(x*d-c*l)-s*(a*d-v*l)+y*(a*c-v*x)),r[7]=n*(x*f-c*m)-s*(a*f-v*m)+p*(a*c-v*x),r[8]=s*(M*d-f*t)-p*(h*d-c*t)+y*(h*f-c*M),r[9]=-(n*(M*d-f*t)-p*(i*d-v*t)+y*(i*f-v*M)),r[10]=n*(h*d-c*t)-s*(i*d-v*t)+y*(i*c-v*h),r[11]=-(n*(h*f-c*M)-s*(i*f-v*M)+p*(i*c-v*h)),r[12]=-(s*(M*l-m*t)-p*(h*l-x*t)+y*(h*m-x*M)),r[13]=n*(M*l-m*t)-p*(i*l-a*t)+y*(i*m-a*M),r[14]=-(n*(h*l-x*t)-s*(i*l-a*t)+y*(i*x-a*h)),r[15]=n*(h*m-x*M)-s*(i*m-a*M)+p*(i*x-a*h),r}function M1(r){var e=r[0],n=r[1],i=r[2],a=r[3],v=r[4],s=r[5],h=r[6],x=r[7],c=r[8],p=r[9],M=r[10],m=r[11],f=r[12],y=r[13],t=r[14],l=r[15],d=e*s-n*v,w=e*h-i*v,L=e*x-a*v,S=n*h-i*s,g=n*x-a*s,z=i*x-a*h,I=c*y-p*f,_=c*t-M*f,b=c*l-m*f,R=p*t-M*y,O=p*l-m*y,T=M*l-m*t;return d*T-w*O+L*R+S*b-g*_+z*I}function X(r,e,n){var i=e[0],a=e[1],v=e[2],s=e[3],h=e[4],x=e[5],c=e[6],p=e[7],M=e[8],m=e[9],f=e[10],y=e[11],t=e[12],l=e[13],d=e[14],w=e[15],L=n[0],S=n[1],g=n[2],z=n[3];return r[0]=L*i+S*h+g*M+z*t,r[1]=L*a+S*x+g*m+z*l,r[2]=L*v+S*c+g*f+z*d,r[3]=L*s+S*p+g*y+z*w,L=n[4],S=n[5],g=n[6],z=n[7],r[4]=L*i+S*h+g*M+z*t,r[5]=L*a+S*x+g*m+z*l,r[6]=L*v+S*c+g*f+z*d,r[7]=L*s+S*p+g*y+z*w,L=n[8],S=n[9],g=n[10],z=n[11],r[8]=L*i+S*h+g*M+z*t,r[9]=L*a+S*x+g*m+z*l,r[10]=L*v+S*c+g*f+z*d,r[11]=L*s+S*p+g*y+z*w,L=n[12],S=n[13],g=n[14],z=n[15],r[12]=L*i+S*h+g*M+z*t,r[13]=L*a+S*x+g*m+z*l,r[14]=L*v+S*c+g*f+z*d,r[15]=L*s+S*p+g*y+z*w,r}function m1(r,e,n){var i=n[0],a=n[1],v=n[2],s,h,x,c,p,M,m,f,y,t,l,d;return e===r?(r[12]=e[0]*i+e[4]*a+e[8]*v+e[12],r[13]=e[1]*i+e[5]*a+e[9]*v+e[13],r[14]=e[2]*i+e[6]*a+e[10]*v+e[14],r[15]=e[3]*i+e[7]*a+e[11]*v+e[15]):(s=e[0],h=e[1],x=e[2],c=e[3],p=e[4],M=e[5],m=e[6],f=e[7],y=e[8],t=e[9],l=e[10],d=e[11],r[0]=s,r[1]=h,r[2]=x,r[3]=c,r[4]=p,r[5]=M,r[6]=m,r[7]=f,r[8]=y,r[9]=t,r[10]=l,r[11]=d,r[12]=s*i+p*a+y*v+e[12],r[13]=h*i+M*a+t*v+e[13],r[14]=x*i+m*a+l*v+e[14],r[15]=c*i+f*a+d*v+e[15]),r}function t1(r,e,n){var i=n[0],a=n[1],v=n[2];return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3]*i,r[4]=e[4]*a,r[5]=e[5]*a,r[6]=e[6]*a,r[7]=e[7]*a,r[8]=e[8]*v,r[9]=e[9]*v,r[10]=e[10]*v,r[11]=e[11]*v,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function y1(r,e,n,i){var a=i[0],v=i[1],s=i[2],h=Math.hypot(a,v,s),x,c,p,M,m,f,y,t,l,d,w,L,S,g,z,I,_,b,R,O,T,N,A,C;return h<P?null:(h=1/h,a*=h,v*=h,s*=h,x=Math.sin(n),c=Math.cos(n),p=1-c,M=e[0],m=e[1],f=e[2],y=e[3],t=e[4],l=e[5],d=e[6],w=e[7],L=e[8],S=e[9],g=e[10],z=e[11],I=a*a*p+c,_=v*a*p+s*x,b=s*a*p-v*x,R=a*v*p-s*x,O=v*v*p+c,T=s*v*p+a*x,N=a*s*p+v*x,A=v*s*p-a*x,C=s*s*p+c,r[0]=M*I+t*_+L*b,r[1]=m*I+l*_+S*b,r[2]=f*I+d*_+g*b,r[3]=y*I+w*_+z*b,r[4]=M*R+t*O+L*T,r[5]=m*R+l*O+S*T,r[6]=f*R+d*O+g*T,r[7]=y*R+w*O+z*T,r[8]=M*N+t*A+L*C,r[9]=m*N+l*A+S*C,r[10]=f*N+d*A+g*C,r[11]=y*N+w*A+z*C,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function d1(r,e,n){var i=Math.sin(n),a=Math.cos(n),v=e[4],s=e[5],h=e[6],x=e[7],c=e[8],p=e[9],M=e[10],m=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=v*a+c*i,r[5]=s*a+p*i,r[6]=h*a+M*i,r[7]=x*a+m*i,r[8]=c*a-v*i,r[9]=p*a-s*i,r[10]=M*a-h*i,r[11]=m*a-x*i,r}function g1(r,e,n){var i=Math.sin(n),a=Math.cos(n),v=e[0],s=e[1],h=e[2],x=e[3],c=e[8],p=e[9],M=e[10],m=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=v*a-c*i,r[1]=s*a-p*i,r[2]=h*a-M*i,r[3]=x*a-m*i,r[8]=v*i+c*a,r[9]=s*i+p*a,r[10]=h*i+M*a,r[11]=x*i+m*a,r}function z1(r,e,n){var i=Math.sin(n),a=Math.cos(n),v=e[0],s=e[1],h=e[2],x=e[3],c=e[4],p=e[5],M=e[6],m=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=v*a+c*i,r[1]=s*a+p*i,r[2]=h*a+M*i,r[3]=x*a+m*i,r[4]=c*a-v*i,r[5]=p*a-s*i,r[6]=M*a-h*i,r[7]=m*a-x*i,r}function S1(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function L1(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function w1(r,e,n){var i=n[0],a=n[1],v=n[2],s=Math.hypot(i,a,v),h,x,c;return s<P?null:(s=1/s,i*=s,a*=s,v*=s,h=Math.sin(e),x=Math.cos(e),c=1-x,r[0]=i*i*c+x,r[1]=a*i*c+v*h,r[2]=v*i*c-a*h,r[3]=0,r[4]=i*a*c-v*h,r[5]=a*a*c+x,r[6]=v*a*c+i*h,r[7]=0,r[8]=i*v*c+a*h,r[9]=a*v*c-i*h,r[10]=v*v*c+x,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function A1(r,e){var n=Math.sin(e),i=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=i,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function P1(r,e){var n=Math.sin(e),i=Math.cos(e);return r[0]=i,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=i,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function _1(r,e){var n=Math.sin(e),i=Math.cos(e);return r[0]=i,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=i,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Q(r,e,n){var i=e[0],a=e[1],v=e[2],s=e[3],h=i+i,x=a+a,c=v+v,p=i*h,M=i*x,m=i*c,f=a*x,y=a*c,t=v*c,l=s*h,d=s*x,w=s*c;return r[0]=1-(f+t),r[1]=M+w,r[2]=m-d,r[3]=0,r[4]=M-w,r[5]=1-(p+t),r[6]=y+l,r[7]=0,r[8]=m+d,r[9]=y-l,r[10]=1-(p+f),r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function b1(r,e){var n=new G(3),i=-e[0],a=-e[1],v=-e[2],s=e[3],h=e[4],x=e[5],c=e[6],p=e[7],M=i*i+a*a+v*v+s*s;return M>0?(n[0]=(h*s+p*i+x*v-c*a)*2/M,n[1]=(x*s+p*a+c*i-h*v)*2/M,n[2]=(c*s+p*v+h*a-x*i)*2/M):(n[0]=(h*s+p*i+x*v-c*a)*2,n[1]=(x*s+p*a+c*i-h*v)*2,n[2]=(c*s+p*v+h*a-x*i)*2),Q(r,e,n),r}function R1(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function $(r,e){var n=e[0],i=e[1],a=e[2],v=e[4],s=e[5],h=e[6],x=e[8],c=e[9],p=e[10];return r[0]=Math.hypot(n,i,a),r[1]=Math.hypot(v,s,h),r[2]=Math.hypot(x,c,p),r}function E1(r,e){var n=new G(3);$(n,e);var i=1/n[0],a=1/n[1],v=1/n[2],s=e[0]*i,h=e[1]*a,x=e[2]*v,c=e[4]*i,p=e[5]*a,M=e[6]*v,m=e[8]*i,f=e[9]*a,y=e[10]*v,t=s+p+y,l=0;return t>0?(l=Math.sqrt(t+1)*2,r[3]=.25*l,r[0]=(M-f)/l,r[1]=(m-x)/l,r[2]=(h-c)/l):s>p&&s>y?(l=Math.sqrt(1+s-p-y)*2,r[3]=(M-f)/l,r[0]=.25*l,r[1]=(h+c)/l,r[2]=(m+x)/l):p>y?(l=Math.sqrt(1+p-s-y)*2,r[3]=(m-x)/l,r[0]=(h+c)/l,r[1]=.25*l,r[2]=(M+f)/l):(l=Math.sqrt(1+y-s-p)*2,r[3]=(h-c)/l,r[0]=(m+x)/l,r[1]=(M+f)/l,r[2]=.25*l),r}function I1(r,e,n,i){var a=e[0],v=e[1],s=e[2],h=e[3],x=a+a,c=v+v,p=s+s,M=a*x,m=a*c,f=a*p,y=v*c,t=v*p,l=s*p,d=h*x,w=h*c,L=h*p,S=i[0],g=i[1],z=i[2];return r[0]=(1-(y+l))*S,r[1]=(m+L)*S,r[2]=(f-w)*S,r[3]=0,r[4]=(m-L)*g,r[5]=(1-(M+l))*g,r[6]=(t+d)*g,r[7]=0,r[8]=(f+w)*z,r[9]=(t-d)*z,r[10]=(1-(M+y))*z,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function O1(r,e,n,i,a){var v=e[0],s=e[1],h=e[2],x=e[3],c=v+v,p=s+s,M=h+h,m=v*c,f=v*p,y=v*M,t=s*p,l=s*M,d=h*M,w=x*c,L=x*p,S=x*M,g=i[0],z=i[1],I=i[2],_=a[0],b=a[1],R=a[2],O=(1-(t+d))*g,T=(f+S)*g,N=(y-L)*g,A=(f-S)*z,C=(1-(m+d))*z,F=(l+w)*z,V=(y+L)*I,j=(l-w)*I,k=(1-(m+t))*I;return r[0]=O,r[1]=T,r[2]=N,r[3]=0,r[4]=A,r[5]=C,r[6]=F,r[7]=0,r[8]=V,r[9]=j,r[10]=k,r[11]=0,r[12]=n[0]+_-(O*_+A*b+V*R),r[13]=n[1]+b-(T*_+C*b+j*R),r[14]=n[2]+R-(N*_+F*b+k*R),r[15]=1,r}function T1(r,e){var n=e[0],i=e[1],a=e[2],v=e[3],s=n+n,h=i+i,x=a+a,c=n*s,p=i*s,M=i*h,m=a*s,f=a*h,y=a*x,t=v*s,l=v*h,d=v*x;return r[0]=1-M-y,r[1]=p+d,r[2]=m-l,r[3]=0,r[4]=p-d,r[5]=1-c-y,r[6]=f+t,r[7]=0,r[8]=m+l,r[9]=f-t,r[10]=1-c-M,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function N1(r,e,n,i,a,v,s){var h=1/(n-e),x=1/(a-i),c=1/(v-s);return r[0]=v*2*h,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=v*2*x,r[6]=0,r[7]=0,r[8]=(n+e)*h,r[9]=(a+i)*x,r[10]=(s+v)*c,r[11]=-1,r[12]=0,r[13]=0,r[14]=s*v*2*c,r[15]=0,r}function K(r,e,n,i,a){var v=1/Math.tan(e/2),s;return r[0]=v/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=v,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,a!=null&&a!==1/0?(s=1/(i-a),r[10]=(a+i)*s,r[14]=2*a*i*s):(r[10]=-1,r[14]=-2*i),r}var C1=K;function G1(r,e,n,i,a){var v=1/Math.tan(e/2),s;return r[0]=v/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=v,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,a!=null&&a!==1/0?(s=1/(i-a),r[10]=a*s,r[14]=a*i*s):(r[10]=-1,r[14]=-i),r}function Y1(r,e,n,i){var a=Math.tan(e.upDegrees*Math.PI/180),v=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),h=Math.tan(e.rightDegrees*Math.PI/180),x=2/(s+h),c=2/(a+v);return r[0]=x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=c,r[6]=0,r[7]=0,r[8]=-((s-h)*x*.5),r[9]=(a-v)*c*.5,r[10]=i/(n-i),r[11]=-1,r[12]=0,r[13]=0,r[14]=i*n/(n-i),r[15]=0,r}function J(r,e,n,i,a,v,s){var h=1/(e-n),x=1/(i-a),c=1/(v-s);return r[0]=-2*h,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*c,r[11]=0,r[12]=(e+n)*h,r[13]=(a+i)*x,r[14]=(s+v)*c,r[15]=1,r}var F1=J;function V1(r,e,n,i,a,v,s){var h=1/(e-n),x=1/(i-a),c=1/(v-s);return r[0]=-2*h,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=c,r[11]=0,r[12]=(e+n)*h,r[13]=(a+i)*x,r[14]=v*c,r[15]=1,r}function W1(r,e,n,i){var a,v,s,h,x,c,p,M,m,f,y=e[0],t=e[1],l=e[2],d=i[0],w=i[1],L=i[2],S=n[0],g=n[1],z=n[2];return Math.abs(y-S)<P&&Math.abs(t-g)<P&&Math.abs(l-z)<P?q(r):(p=y-S,M=t-g,m=l-z,f=1/Math.hypot(p,M,m),p*=f,M*=f,m*=f,a=w*m-L*M,v=L*p-d*m,s=d*M-w*p,f=Math.hypot(a,v,s),f?(f=1/f,a*=f,v*=f,s*=f):(a=0,v=0,s=0),h=M*s-m*v,x=m*a-p*s,c=p*v-M*a,f=Math.hypot(h,x,c),f?(f=1/f,h*=f,x*=f,c*=f):(h=0,x=0,c=0),r[0]=a,r[1]=h,r[2]=p,r[3]=0,r[4]=v,r[5]=x,r[6]=M,r[7]=0,r[8]=s,r[9]=c,r[10]=m,r[11]=0,r[12]=-(a*y+v*t+s*l),r[13]=-(h*y+x*t+c*l),r[14]=-(p*y+M*t+m*l),r[15]=1,r)}function D1(r,e,n,i){var a=e[0],v=e[1],s=e[2],h=i[0],x=i[1],c=i[2],p=a-n[0],M=v-n[1],m=s-n[2],f=p*p+M*M+m*m;f>0&&(f=1/Math.sqrt(f),p*=f,M*=f,m*=f);var y=x*m-c*M,t=c*p-h*m,l=h*M-x*p;return f=y*y+t*t+l*l,f>0&&(f=1/Math.sqrt(f),y*=f,t*=f,l*=f),r[0]=y,r[1]=t,r[2]=l,r[3]=0,r[4]=M*l-m*t,r[5]=m*y-p*l,r[6]=p*t-M*y,r[7]=0,r[8]=p,r[9]=M,r[10]=m,r[11]=0,r[12]=a,r[13]=v,r[14]=s,r[15]=1,r}function U1(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function B1(r){return Math.hypot(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}function j1(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r[8]=e[8]+n[8],r[9]=e[9]+n[9],r[10]=e[10]+n[10],r[11]=e[11]+n[11],r[12]=e[12]+n[12],r[13]=e[13]+n[13],r[14]=e[14]+n[14],r[15]=e[15]+n[15],r}function o(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r[6]=e[6]-n[6],r[7]=e[7]-n[7],r[8]=e[8]-n[8],r[9]=e[9]-n[9],r[10]=e[10]-n[10],r[11]=e[11]-n[11],r[12]=e[12]-n[12],r[13]=e[13]-n[13],r[14]=e[14]-n[14],r[15]=e[15]-n[15],r}function k1(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r[8]=e[8]*n,r[9]=e[9]*n,r[10]=e[10]*n,r[11]=e[11]*n,r[12]=e[12]*n,r[13]=e[13]*n,r[14]=e[14]*n,r[15]=e[15]*n,r}function H1(r,e,n,i){return r[0]=e[0]+n[0]*i,r[1]=e[1]+n[1]*i,r[2]=e[2]+n[2]*i,r[3]=e[3]+n[3]*i,r[4]=e[4]+n[4]*i,r[5]=e[5]+n[5]*i,r[6]=e[6]+n[6]*i,r[7]=e[7]+n[7]*i,r[8]=e[8]+n[8]*i,r[9]=e[9]+n[9]*i,r[10]=e[10]+n[10]*i,r[11]=e[11]+n[11]*i,r[12]=e[12]+n[12]*i,r[13]=e[13]+n[13]*i,r[14]=e[14]+n[14]*i,r[15]=e[15]+n[15]*i,r}function Z1(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}function q1(r,e){var n=r[0],i=r[1],a=r[2],v=r[3],s=r[4],h=r[5],x=r[6],c=r[7],p=r[8],M=r[9],m=r[10],f=r[11],y=r[12],t=r[13],l=r[14],d=r[15],w=e[0],L=e[1],S=e[2],g=e[3],z=e[4],I=e[5],_=e[6],b=e[7],R=e[8],O=e[9],T=e[10],N=e[11],A=e[12],C=e[13],F=e[14],V=e[15];return Math.abs(n-w)<=P*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(i-L)<=P*Math.max(1,Math.abs(i),Math.abs(L))&&Math.abs(a-S)<=P*Math.max(1,Math.abs(a),Math.abs(S))&&Math.abs(v-g)<=P*Math.max(1,Math.abs(v),Math.abs(g))&&Math.abs(s-z)<=P*Math.max(1,Math.abs(s),Math.abs(z))&&Math.abs(h-I)<=P*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(x-_)<=P*Math.max(1,Math.abs(x),Math.abs(_))&&Math.abs(c-b)<=P*Math.max(1,Math.abs(c),Math.abs(b))&&Math.abs(p-R)<=P*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(M-O)<=P*Math.max(1,Math.abs(M),Math.abs(O))&&Math.abs(m-T)<=P*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(f-N)<=P*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(y-A)<=P*Math.max(1,Math.abs(y),Math.abs(A))&&Math.abs(t-C)<=P*Math.max(1,Math.abs(t),Math.abs(C))&&Math.abs(l-F)<=P*Math.max(1,Math.abs(l),Math.abs(F))&&Math.abs(d-V)<=P*Math.max(1,Math.abs(d),Math.abs(V))}var X1=X,Q1=o;function B(r){throw alert(r),new Error(r)}var Y=document.getElementById("canvas"),E=Y.getContext("webgl2");E||B("webgl2 is not supported");function u(){let r=window.devicePixelRatio,e=Math.round(Y.clientWidth*r),n=Math.round(Y.clientHeight*r);Y.width=e,Y.height=n,E.viewport(0,0,e,n)}u();window.addEventListener("resize",u);function r1(r,e,n){let i=r.createShader(e);if(r.shaderSource(i,n),r.compileShader(i),r.getShaderParameter(i,r.COMPILE_STATUS))return i;let v=r.getShaderInfoLog(i);r.deleteShader(i),B(`failed to compile shader:
${v}`)}function $1(r,e,n){let i=r.createProgram();if(r.attachShader(i,e),r.attachShader(i,n),r.linkProgram(i),r.getProgramParameter(i,r.LINK_STATUS))return i;let v=r.getProgramInfoLog(i);r.deleteProgram(i),B(`failed to link program:
${v}`)}function K1(r,e,n,i){i!==void 0&&r.bindVertexArray(i),r.bindBuffer(r.ARRAY_BUFFER,r.createBuffer()),r.bufferData(r.ARRAY_BUFFER,n.data,r.STATIC_DRAW),r.enableVertexAttribArray(e),r.vertexAttribPointer(e,n.size,n.type,n.normalized??!1,n.stride??0,n.offset??0),r.enableVertexAttribArray(e)}var J1=r1(E,E.VERTEX_SHADER,Z),o1=r1(E,E.FRAGMENT_SHADER,H),D=$1(E,J1,o1);E.useProgram(D);var U={attributes:{a_position:E.getAttribLocation(D,"a_position")},uniforms:{u_viewMatrix:E.getUniformLocation(D,"u_viewMatrix"),u_screenSize:E.getUniformLocation(D,"u_screenSize"),u_time:E.getUniformLocation(D,"u_time")}};E.uniform2f(U.uniforms.u_screenSize,.5,.5*Y.height/Y.width);var u1=E.createVertexArray();E.bindVertexArray(u1);K1(E,U.attributes.a_position,{data:new Float32Array([-1,-1,-1,1,1,-1,1,1,1,-1,-1,1]),size:2,type:E.FLOAT});var rr=performance.now();function e1(){let r=(performance.now()-rr)/1e3;E.uniform1f(U.uniforms.u_time,r),E.uniformMatrix4fv(U.uniforms.u_viewMatrix,!1,W.identity(W.create())),E.drawArrays(E.TRIANGLES,0,6),requestAnimationFrame(e1)}requestAnimationFrame(e1);
