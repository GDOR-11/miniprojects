var nr=Object.defineProperty;var ir=(r,e)=>{for(var n in e)nr(r,n,{get:e[n],enumerable:!0})};var k=`#version 300 es
precision highp float;struct Ray{vec3 origin;vec3 direction;};struct Material{vec3 albedo;vec3 emissivity;};struct Collision{float distance;vec3 normal;Material material;};struct Sphere{vec3 center;float radius;Material material;};void sphereIntersection(inout Collision current,Ray ray,Sphere sphere){vec3 oc=ray.origin-sphere.center;float b=dot(oc,ray.direction);if(b>0.0)return;float c=dot(oc,oc)-sphere.radius*sphere.radius;if(c<0.0)return;float a=dot(ray.direction,ray.direction);float d=b*b-a*c;if(d<0.0)return;float t=(-b-sqrt(d))/a;if(t>=current.distance&&current.distance>=0.0)return;current.distance=t;vec3 hitPoint=ray.origin+t*ray.direction;current.normal=(hitPoint-sphere.center)/sphere.radius;current.material=sphere.material;}Collision sceneIntersection(Ray ray){Sphere sphere1=Sphere(vec3(0.0,-1.0,10.0),1.0,Material(vec3(1.0,0.0,0.0),vec3(0.0)));Sphere sphere2=Sphere(vec3(0.0,1.0,10.0),1.0,Material(vec3(1.0,1.0,0.0),vec3(0.0)));Sphere sphere3=Sphere(vec3(2.0,3.0,8.0),1.0,Material(vec3(0.0,0.0,0.0),vec3(1.0)));Collision collision;collision.distance=-1.0;sphereIntersection(collision,ray,sphere1);sphereIntersection(collision,ray,sphere2);sphereIntersection(collision,ray,sphere3);return collision;}vec3 hash(vec3 p){p=fract(p*vec3(0.1031,0.1030,0.0973));p+=dot(p,p.yzx+33.33);return fract((p.xxy+p.yzz)*p.zyx);}vec3 randomUnitVector(vec3 seed){vec3 v=vec3(1.0);for(int i=0;length(v)>1.0||length(v)==0.0;i++){vec3 h=hash(seed+vec3(i));v=h*2.0-vec3(1.0);}return normalize(v);}float colorCorrection(float intensity){return intensity<=0.0031308?12.92*intensity:1.055*pow(intensity,1.0/2.4)-0.055;}uniform mat4 u_viewMatrix;uniform float u_time;uniform sampler2D u_lastFrame;in vec3 v_pixelLocation;out vec4 outColor;void main(){vec4 origin=u_viewMatrix*vec4(0.0,0.0,0.0,1.0);vec4 direction=u_viewMatrix*vec4(normalize(v_pixelLocation),0.0);vec3 seed=100.0*v_pixelLocation+vec3(5184.0*sin(u_time));vec3 color=vec3(0.0);for(int i=0;i<5;i++){vec3 contribution=vec3(0.2);Ray ray=Ray(origin.xyz,direction.xyz);for(int j=0;j<3;j++){Collision collision=sceneIntersection(ray);vec3 hitPoint=ray.origin+ray.direction*collision.distance+collision.normal*0.001;if(collision.distance<0.0)break;color+=contribution*collision.material.emissivity;contribution*=collision.material.albedo;if(contribution==vec3(0.0))break;ray.origin=hitPoint;ray.direction=randomUnitVector(seed+=vec3(1423.7));if(dot(ray.direction,collision.normal)<0.0){ray.direction=-ray.direction;}contribution*=dot(ray.direction,collision.normal);}}outColor=vec4(colorCorrection(color.r),colorCorrection(color.g),colorCorrection(color.b),1.0);}`;var H=`#version 300 es
uniform vec2 u_screenSize;out vec3 v_pixelLocation;in vec2 a_position;void main(){gl_Position=vec4(a_position,0,1);v_pixelLocation=vec3(0.5*a_position*u_screenSize,1);}`;var T=1e-6,q=typeof Float32Array<"u"?Float32Array:Array;var c1=Math.PI/180,h1=180/Math.PI;var D={};ir(D,{add:()=>jr,adjoint:()=>fr,clone:()=>sr,copy:()=>cr,create:()=>vr,decompose:()=>Or,determinant:()=>pr,equals:()=>Xr,exactEquals:()=>Zr,frob:()=>Br,fromQuat:()=>_r,fromQuat2:()=>Rr,fromRotation:()=>Lr,fromRotationTranslation:()=>Q,fromRotationTranslationScale:()=>Nr,fromRotationTranslationScaleOrigin:()=>Tr,fromScaling:()=>br,fromTranslation:()=>Sr,fromValues:()=>hr,fromXRotation:()=>wr,fromYRotation:()=>Ar,fromZRotation:()=>Pr,frustum:()=>Gr,getRotation:()=>Ir,getScaling:()=>$,getTranslation:()=>Er,identity:()=>Z,invert:()=>Mr,lookAt:()=>Vr,mul:()=>Qr,multiply:()=>X,multiplyScalar:()=>kr,multiplyScalarAndAdd:()=>Hr,ortho:()=>Fr,orthoNO:()=>J,orthoZO:()=>Dr,perspective:()=>qr,perspectiveFromFieldOfView:()=>Yr,perspectiveNO:()=>K,perspectiveZO:()=>Cr,rotate:()=>tr,rotateX:()=>yr,rotateY:()=>gr,rotateZ:()=>zr,scale:()=>dr,set:()=>xr,str:()=>Ur,sub:()=>$r,subtract:()=>o,targetTo:()=>Wr,translate:()=>mr,transpose:()=>lr});function vr(){var r=new q(16);return q!=Float32Array&&(r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=0,r[12]=0,r[13]=0,r[14]=0),r[0]=1,r[5]=1,r[10]=1,r[15]=1,r}function sr(r){var e=new q(16);return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],e}function cr(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function hr(r,e,n,i,a,v,s,c,x,h,l,f,m,p,d,t){var M=new q(16);return M[0]=r,M[1]=e,M[2]=n,M[3]=i,M[4]=a,M[5]=v,M[6]=s,M[7]=c,M[8]=x,M[9]=h,M[10]=l,M[11]=f,M[12]=m,M[13]=p,M[14]=d,M[15]=t,M}function xr(r,e,n,i,a,v,s,c,x,h,l,f,m,p,d,t,M){return r[0]=e,r[1]=n,r[2]=i,r[3]=a,r[4]=v,r[5]=s,r[6]=c,r[7]=x,r[8]=h,r[9]=l,r[10]=f,r[11]=m,r[12]=p,r[13]=d,r[14]=t,r[15]=M,r}function Z(r){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function lr(r,e){if(r===e){var n=e[1],i=e[2],a=e[3],v=e[6],s=e[7],c=e[11];r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=n,r[6]=e[9],r[7]=e[13],r[8]=i,r[9]=v,r[11]=e[14],r[12]=a,r[13]=s,r[14]=c}else r[0]=e[0],r[1]=e[4],r[2]=e[8],r[3]=e[12],r[4]=e[1],r[5]=e[5],r[6]=e[9],r[7]=e[13],r[8]=e[2],r[9]=e[6],r[10]=e[10],r[11]=e[14],r[12]=e[3],r[13]=e[7],r[14]=e[11],r[15]=e[15];return r}function Mr(r,e){var n=e[0],i=e[1],a=e[2],v=e[3],s=e[4],c=e[5],x=e[6],h=e[7],l=e[8],f=e[9],m=e[10],p=e[11],d=e[12],t=e[13],M=e[14],b=e[15],w=n*c-i*s,S=n*x-a*s,y=n*h-v*s,g=i*x-a*c,z=i*h-v*c,R=a*h-v*x,A=l*t-f*d,E=l*M-m*d,L=l*b-p*d,I=f*M-m*t,O=f*b-p*t,N=m*b-p*M,P=w*N-S*O+y*I+g*L-z*E+R*A;return P?(P=1/P,r[0]=(c*N-x*O+h*I)*P,r[1]=(a*O-i*N-v*I)*P,r[2]=(t*R-M*z+b*g)*P,r[3]=(m*z-f*R-p*g)*P,r[4]=(x*L-s*N-h*E)*P,r[5]=(n*N-a*L+v*E)*P,r[6]=(M*y-d*R-b*S)*P,r[7]=(l*R-m*y+p*S)*P,r[8]=(s*O-c*L+h*A)*P,r[9]=(i*L-n*O-v*A)*P,r[10]=(d*z-t*y+b*w)*P,r[11]=(f*y-l*z-p*w)*P,r[12]=(c*E-s*I-x*A)*P,r[13]=(n*I-i*E+a*A)*P,r[14]=(t*S-d*g-M*w)*P,r[15]=(l*g-f*S+m*w)*P,r):null}function fr(r,e){var n=e[0],i=e[1],a=e[2],v=e[3],s=e[4],c=e[5],x=e[6],h=e[7],l=e[8],f=e[9],m=e[10],p=e[11],d=e[12],t=e[13],M=e[14],b=e[15],w=n*c-i*s,S=n*x-a*s,y=n*h-v*s,g=i*x-a*c,z=i*h-v*c,R=a*h-v*x,A=l*t-f*d,E=l*M-m*d,L=l*b-p*d,I=f*M-m*t,O=f*b-p*t,N=m*b-p*M;return r[0]=c*N-x*O+h*I,r[1]=a*O-i*N-v*I,r[2]=t*R-M*z+b*g,r[3]=m*z-f*R-p*g,r[4]=x*L-s*N-h*E,r[5]=n*N-a*L+v*E,r[6]=M*y-d*R-b*S,r[7]=l*R-m*y+p*S,r[8]=s*O-c*L+h*A,r[9]=i*L-n*O-v*A,r[10]=d*z-t*y+b*w,r[11]=f*y-l*z-p*w,r[12]=c*E-s*I-x*A,r[13]=n*I-i*E+a*A,r[14]=t*S-d*g-M*w,r[15]=l*g-f*S+m*w,r}function pr(r){var e=r[0],n=r[1],i=r[2],a=r[3],v=r[4],s=r[5],c=r[6],x=r[7],h=r[8],l=r[9],f=r[10],m=r[11],p=r[12],d=r[13],t=r[14],M=r[15],b=e*s-n*v,w=e*c-i*v,S=n*c-i*s,y=h*d-l*p,g=h*t-f*p,z=l*t-f*d,R=e*z-n*g+i*y,A=v*z-s*g+c*y,E=h*S-l*w+f*b,L=p*S-d*w+t*b;return x*R-a*A+M*E-m*L}function X(r,e,n){var i=e[0],a=e[1],v=e[2],s=e[3],c=e[4],x=e[5],h=e[6],l=e[7],f=e[8],m=e[9],p=e[10],d=e[11],t=e[12],M=e[13],b=e[14],w=e[15],S=n[0],y=n[1],g=n[2],z=n[3];return r[0]=S*i+y*c+g*f+z*t,r[1]=S*a+y*x+g*m+z*M,r[2]=S*v+y*h+g*p+z*b,r[3]=S*s+y*l+g*d+z*w,S=n[4],y=n[5],g=n[6],z=n[7],r[4]=S*i+y*c+g*f+z*t,r[5]=S*a+y*x+g*m+z*M,r[6]=S*v+y*h+g*p+z*b,r[7]=S*s+y*l+g*d+z*w,S=n[8],y=n[9],g=n[10],z=n[11],r[8]=S*i+y*c+g*f+z*t,r[9]=S*a+y*x+g*m+z*M,r[10]=S*v+y*h+g*p+z*b,r[11]=S*s+y*l+g*d+z*w,S=n[12],y=n[13],g=n[14],z=n[15],r[12]=S*i+y*c+g*f+z*t,r[13]=S*a+y*x+g*m+z*M,r[14]=S*v+y*h+g*p+z*b,r[15]=S*s+y*l+g*d+z*w,r}function mr(r,e,n){var i=n[0],a=n[1],v=n[2],s,c,x,h,l,f,m,p,d,t,M,b;return e===r?(r[12]=e[0]*i+e[4]*a+e[8]*v+e[12],r[13]=e[1]*i+e[5]*a+e[9]*v+e[13],r[14]=e[2]*i+e[6]*a+e[10]*v+e[14],r[15]=e[3]*i+e[7]*a+e[11]*v+e[15]):(s=e[0],c=e[1],x=e[2],h=e[3],l=e[4],f=e[5],m=e[6],p=e[7],d=e[8],t=e[9],M=e[10],b=e[11],r[0]=s,r[1]=c,r[2]=x,r[3]=h,r[4]=l,r[5]=f,r[6]=m,r[7]=p,r[8]=d,r[9]=t,r[10]=M,r[11]=b,r[12]=s*i+l*a+d*v+e[12],r[13]=c*i+f*a+t*v+e[13],r[14]=x*i+m*a+M*v+e[14],r[15]=h*i+p*a+b*v+e[15]),r}function dr(r,e,n){var i=n[0],a=n[1],v=n[2];return r[0]=e[0]*i,r[1]=e[1]*i,r[2]=e[2]*i,r[3]=e[3]*i,r[4]=e[4]*a,r[5]=e[5]*a,r[6]=e[6]*a,r[7]=e[7]*a,r[8]=e[8]*v,r[9]=e[9]*v,r[10]=e[10]*v,r[11]=e[11]*v,r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15],r}function tr(r,e,n,i){var a=i[0],v=i[1],s=i[2],c=Math.sqrt(a*a+v*v+s*s),x,h,l,f,m,p,d,t,M,b,w,S,y,g,z,R,A,E,L,I,O,N,P,G;return c<T?null:(c=1/c,a*=c,v*=c,s*=c,x=Math.sin(n),h=Math.cos(n),l=1-h,f=e[0],m=e[1],p=e[2],d=e[3],t=e[4],M=e[5],b=e[6],w=e[7],S=e[8],y=e[9],g=e[10],z=e[11],R=a*a*l+h,A=v*a*l+s*x,E=s*a*l-v*x,L=a*v*l-s*x,I=v*v*l+h,O=s*v*l+a*x,N=a*s*l+v*x,P=v*s*l-a*x,G=s*s*l+h,r[0]=f*R+t*A+S*E,r[1]=m*R+M*A+y*E,r[2]=p*R+b*A+g*E,r[3]=d*R+w*A+z*E,r[4]=f*L+t*I+S*O,r[5]=m*L+M*I+y*O,r[6]=p*L+b*I+g*O,r[7]=d*L+w*I+z*O,r[8]=f*N+t*P+S*G,r[9]=m*N+M*P+y*G,r[10]=p*N+b*P+g*G,r[11]=d*N+w*P+z*G,e!==r&&(r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r)}function yr(r,e,n){var i=Math.sin(n),a=Math.cos(n),v=e[4],s=e[5],c=e[6],x=e[7],h=e[8],l=e[9],f=e[10],m=e[11];return e!==r&&(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[4]=v*a+h*i,r[5]=s*a+l*i,r[6]=c*a+f*i,r[7]=x*a+m*i,r[8]=h*a-v*i,r[9]=l*a-s*i,r[10]=f*a-c*i,r[11]=m*a-x*i,r}function gr(r,e,n){var i=Math.sin(n),a=Math.cos(n),v=e[0],s=e[1],c=e[2],x=e[3],h=e[8],l=e[9],f=e[10],m=e[11];return e!==r&&(r[4]=e[4],r[5]=e[5],r[6]=e[6],r[7]=e[7],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=v*a-h*i,r[1]=s*a-l*i,r[2]=c*a-f*i,r[3]=x*a-m*i,r[8]=v*i+h*a,r[9]=s*i+l*a,r[10]=c*i+f*a,r[11]=x*i+m*a,r}function zr(r,e,n){var i=Math.sin(n),a=Math.cos(n),v=e[0],s=e[1],c=e[2],x=e[3],h=e[4],l=e[5],f=e[6],m=e[7];return e!==r&&(r[8]=e[8],r[9]=e[9],r[10]=e[10],r[11]=e[11],r[12]=e[12],r[13]=e[13],r[14]=e[14],r[15]=e[15]),r[0]=v*a+h*i,r[1]=s*a+l*i,r[2]=c*a+f*i,r[3]=x*a+m*i,r[4]=h*a-v*i,r[5]=l*a-s*i,r[6]=f*a-c*i,r[7]=m*a-x*i,r}function Sr(r,e){return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=e[0],r[13]=e[1],r[14]=e[2],r[15]=1,r}function br(r,e){return r[0]=e[0],r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=e[1],r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=e[2],r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Lr(r,e,n){var i=n[0],a=n[1],v=n[2],s=Math.sqrt(i*i+a*a+v*v),c,x,h;return s<T?null:(s=1/s,i*=s,a*=s,v*=s,c=Math.sin(e),x=Math.cos(e),h=1-x,r[0]=i*i*h+x,r[1]=a*i*h+v*c,r[2]=v*i*h-a*c,r[3]=0,r[4]=i*a*h-v*c,r[5]=a*a*h+x,r[6]=v*a*h+i*c,r[7]=0,r[8]=i*v*h+a*c,r[9]=a*v*h-i*c,r[10]=v*v*h+x,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r)}function wr(r,e){var n=Math.sin(e),i=Math.cos(e);return r[0]=1,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=i,r[6]=n,r[7]=0,r[8]=0,r[9]=-n,r[10]=i,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Ar(r,e){var n=Math.sin(e),i=Math.cos(e);return r[0]=i,r[1]=0,r[2]=-n,r[3]=0,r[4]=0,r[5]=1,r[6]=0,r[7]=0,r[8]=n,r[9]=0,r[10]=i,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Pr(r,e){var n=Math.sin(e),i=Math.cos(e);return r[0]=i,r[1]=n,r[2]=0,r[3]=0,r[4]=-n,r[5]=i,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=1,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Q(r,e,n){var i=e[0],a=e[1],v=e[2],s=e[3],c=i+i,x=a+a,h=v+v,l=i*c,f=i*x,m=i*h,p=a*x,d=a*h,t=v*h,M=s*c,b=s*x,w=s*h;return r[0]=1-(p+t),r[1]=f+w,r[2]=m-b,r[3]=0,r[4]=f-w,r[5]=1-(l+t),r[6]=d+M,r[7]=0,r[8]=m+b,r[9]=d-M,r[10]=1-(l+p),r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function Rr(r,e){var n=new q(3),i=-e[0],a=-e[1],v=-e[2],s=e[3],c=e[4],x=e[5],h=e[6],l=e[7],f=i*i+a*a+v*v+s*s;return f>0?(n[0]=(c*s+l*i+x*v-h*a)*2/f,n[1]=(x*s+l*a+h*i-c*v)*2/f,n[2]=(h*s+l*v+c*a-x*i)*2/f):(n[0]=(c*s+l*i+x*v-h*a)*2,n[1]=(x*s+l*a+h*i-c*v)*2,n[2]=(h*s+l*v+c*a-x*i)*2),Q(r,e,n),r}function Er(r,e){return r[0]=e[12],r[1]=e[13],r[2]=e[14],r}function $(r,e){var n=e[0],i=e[1],a=e[2],v=e[4],s=e[5],c=e[6],x=e[8],h=e[9],l=e[10];return r[0]=Math.sqrt(n*n+i*i+a*a),r[1]=Math.sqrt(v*v+s*s+c*c),r[2]=Math.sqrt(x*x+h*h+l*l),r}function Ir(r,e){var n=new q(3);$(n,e);var i=1/n[0],a=1/n[1],v=1/n[2],s=e[0]*i,c=e[1]*a,x=e[2]*v,h=e[4]*i,l=e[5]*a,f=e[6]*v,m=e[8]*i,p=e[9]*a,d=e[10]*v,t=s+l+d,M=0;return t>0?(M=Math.sqrt(t+1)*2,r[3]=.25*M,r[0]=(f-p)/M,r[1]=(m-x)/M,r[2]=(c-h)/M):s>l&&s>d?(M=Math.sqrt(1+s-l-d)*2,r[3]=(f-p)/M,r[0]=.25*M,r[1]=(c+h)/M,r[2]=(m+x)/M):l>d?(M=Math.sqrt(1+l-s-d)*2,r[3]=(m-x)/M,r[0]=(c+h)/M,r[1]=.25*M,r[2]=(f+p)/M):(M=Math.sqrt(1+d-s-l)*2,r[3]=(c-h)/M,r[0]=(m+x)/M,r[1]=(f+p)/M,r[2]=.25*M),r}function Or(r,e,n,i){e[0]=i[12],e[1]=i[13],e[2]=i[14];var a=i[0],v=i[1],s=i[2],c=i[4],x=i[5],h=i[6],l=i[8],f=i[9],m=i[10];n[0]=Math.sqrt(a*a+v*v+s*s),n[1]=Math.sqrt(c*c+x*x+h*h),n[2]=Math.sqrt(l*l+f*f+m*m);var p=1/n[0],d=1/n[1],t=1/n[2],M=a*p,b=v*d,w=s*t,S=c*p,y=x*d,g=h*t,z=l*p,R=f*d,A=m*t,E=M+y+A,L=0;return E>0?(L=Math.sqrt(E+1)*2,r[3]=.25*L,r[0]=(g-R)/L,r[1]=(z-w)/L,r[2]=(b-S)/L):M>y&&M>A?(L=Math.sqrt(1+M-y-A)*2,r[3]=(g-R)/L,r[0]=.25*L,r[1]=(b+S)/L,r[2]=(z+w)/L):y>A?(L=Math.sqrt(1+y-M-A)*2,r[3]=(z-w)/L,r[0]=(b+S)/L,r[1]=.25*L,r[2]=(g+R)/L):(L=Math.sqrt(1+A-M-y)*2,r[3]=(b-S)/L,r[0]=(z+w)/L,r[1]=(g+R)/L,r[2]=.25*L),r}function Nr(r,e,n,i){var a=e[0],v=e[1],s=e[2],c=e[3],x=a+a,h=v+v,l=s+s,f=a*x,m=a*h,p=a*l,d=v*h,t=v*l,M=s*l,b=c*x,w=c*h,S=c*l,y=i[0],g=i[1],z=i[2];return r[0]=(1-(d+M))*y,r[1]=(m+S)*y,r[2]=(p-w)*y,r[3]=0,r[4]=(m-S)*g,r[5]=(1-(f+M))*g,r[6]=(t+b)*g,r[7]=0,r[8]=(p+w)*z,r[9]=(t-b)*z,r[10]=(1-(f+d))*z,r[11]=0,r[12]=n[0],r[13]=n[1],r[14]=n[2],r[15]=1,r}function Tr(r,e,n,i,a){var v=e[0],s=e[1],c=e[2],x=e[3],h=v+v,l=s+s,f=c+c,m=v*h,p=v*l,d=v*f,t=s*l,M=s*f,b=c*f,w=x*h,S=x*l,y=x*f,g=i[0],z=i[1],R=i[2],A=a[0],E=a[1],L=a[2],I=(1-(t+b))*g,O=(p+y)*g,N=(d-S)*g,P=(p-y)*z,G=(1-(m+b))*z,Y=(M+w)*z,F=(d+S)*R,B=(M-w)*R,j=(1-(m+t))*R;return r[0]=I,r[1]=O,r[2]=N,r[3]=0,r[4]=P,r[5]=G,r[6]=Y,r[7]=0,r[8]=F,r[9]=B,r[10]=j,r[11]=0,r[12]=n[0]+A-(I*A+P*E+F*L),r[13]=n[1]+E-(O*A+G*E+B*L),r[14]=n[2]+L-(N*A+Y*E+j*L),r[15]=1,r}function _r(r,e){var n=e[0],i=e[1],a=e[2],v=e[3],s=n+n,c=i+i,x=a+a,h=n*s,l=i*s,f=i*c,m=a*s,p=a*c,d=a*x,t=v*s,M=v*c,b=v*x;return r[0]=1-f-d,r[1]=l+b,r[2]=m-M,r[3]=0,r[4]=l-b,r[5]=1-h-d,r[6]=p+t,r[7]=0,r[8]=m+M,r[9]=p-t,r[10]=1-h-f,r[11]=0,r[12]=0,r[13]=0,r[14]=0,r[15]=1,r}function Gr(r,e,n,i,a,v,s){var c=1/(n-e),x=1/(a-i),h=1/(v-s);return r[0]=v*2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=v*2*x,r[6]=0,r[7]=0,r[8]=(n+e)*c,r[9]=(a+i)*x,r[10]=(s+v)*h,r[11]=-1,r[12]=0,r[13]=0,r[14]=s*v*2*h,r[15]=0,r}function K(r,e,n,i,a){var v=1/Math.tan(e/2);if(r[0]=v/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=v,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,a!=null&&a!==1/0){var s=1/(i-a);r[10]=(a+i)*s,r[14]=2*a*i*s}else r[10]=-1,r[14]=-2*i;return r}var qr=K;function Cr(r,e,n,i,a){var v=1/Math.tan(e/2);if(r[0]=v/n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=v,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[11]=-1,r[12]=0,r[13]=0,r[15]=0,a!=null&&a!==1/0){var s=1/(i-a);r[10]=a*s,r[14]=a*i*s}else r[10]=-1,r[14]=-i;return r}function Yr(r,e,n,i){var a=Math.tan(e.upDegrees*Math.PI/180),v=Math.tan(e.downDegrees*Math.PI/180),s=Math.tan(e.leftDegrees*Math.PI/180),c=Math.tan(e.rightDegrees*Math.PI/180),x=2/(s+c),h=2/(a+v);return r[0]=x,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=h,r[6]=0,r[7]=0,r[8]=-((s-c)*x*.5),r[9]=(a-v)*h*.5,r[10]=i/(n-i),r[11]=-1,r[12]=0,r[13]=0,r[14]=i*n/(n-i),r[15]=0,r}function J(r,e,n,i,a,v,s){var c=1/(e-n),x=1/(i-a),h=1/(v-s);return r[0]=-2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=2*h,r[11]=0,r[12]=(e+n)*c,r[13]=(a+i)*x,r[14]=(s+v)*h,r[15]=1,r}var Fr=J;function Dr(r,e,n,i,a,v,s){var c=1/(e-n),x=1/(i-a),h=1/(v-s);return r[0]=-2*c,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=-2*x,r[6]=0,r[7]=0,r[8]=0,r[9]=0,r[10]=h,r[11]=0,r[12]=(e+n)*c,r[13]=(a+i)*x,r[14]=v*h,r[15]=1,r}function Vr(r,e,n,i){var a,v,s,c,x,h,l,f,m,p,d=e[0],t=e[1],M=e[2],b=i[0],w=i[1],S=i[2],y=n[0],g=n[1],z=n[2];return Math.abs(d-y)<T&&Math.abs(t-g)<T&&Math.abs(M-z)<T?Z(r):(l=d-y,f=t-g,m=M-z,p=1/Math.sqrt(l*l+f*f+m*m),l*=p,f*=p,m*=p,a=w*m-S*f,v=S*l-b*m,s=b*f-w*l,p=Math.sqrt(a*a+v*v+s*s),p?(p=1/p,a*=p,v*=p,s*=p):(a=0,v=0,s=0),c=f*s-m*v,x=m*a-l*s,h=l*v-f*a,p=Math.sqrt(c*c+x*x+h*h),p?(p=1/p,c*=p,x*=p,h*=p):(c=0,x=0,h=0),r[0]=a,r[1]=c,r[2]=l,r[3]=0,r[4]=v,r[5]=x,r[6]=f,r[7]=0,r[8]=s,r[9]=h,r[10]=m,r[11]=0,r[12]=-(a*d+v*t+s*M),r[13]=-(c*d+x*t+h*M),r[14]=-(l*d+f*t+m*M),r[15]=1,r)}function Wr(r,e,n,i){var a=e[0],v=e[1],s=e[2],c=i[0],x=i[1],h=i[2],l=a-n[0],f=v-n[1],m=s-n[2],p=l*l+f*f+m*m;p>0&&(p=1/Math.sqrt(p),l*=p,f*=p,m*=p);var d=x*m-h*f,t=h*l-c*m,M=c*f-x*l;return p=d*d+t*t+M*M,p>0&&(p=1/Math.sqrt(p),d*=p,t*=p,M*=p),r[0]=d,r[1]=t,r[2]=M,r[3]=0,r[4]=f*M-m*t,r[5]=m*d-l*M,r[6]=l*t-f*d,r[7]=0,r[8]=l,r[9]=f,r[10]=m,r[11]=0,r[12]=a,r[13]=v,r[14]=s,r[15]=1,r}function Ur(r){return"mat4("+r[0]+", "+r[1]+", "+r[2]+", "+r[3]+", "+r[4]+", "+r[5]+", "+r[6]+", "+r[7]+", "+r[8]+", "+r[9]+", "+r[10]+", "+r[11]+", "+r[12]+", "+r[13]+", "+r[14]+", "+r[15]+")"}function Br(r){return Math.sqrt(r[0]*r[0]+r[1]*r[1]+r[2]*r[2]+r[3]*r[3]+r[4]*r[4]+r[5]*r[5]+r[6]*r[6]+r[7]*r[7]+r[8]*r[8]+r[9]*r[9]+r[10]*r[10]+r[11]*r[11]+r[12]*r[12]+r[13]*r[13]+r[14]*r[14]+r[15]*r[15])}function jr(r,e,n){return r[0]=e[0]+n[0],r[1]=e[1]+n[1],r[2]=e[2]+n[2],r[3]=e[3]+n[3],r[4]=e[4]+n[4],r[5]=e[5]+n[5],r[6]=e[6]+n[6],r[7]=e[7]+n[7],r[8]=e[8]+n[8],r[9]=e[9]+n[9],r[10]=e[10]+n[10],r[11]=e[11]+n[11],r[12]=e[12]+n[12],r[13]=e[13]+n[13],r[14]=e[14]+n[14],r[15]=e[15]+n[15],r}function o(r,e,n){return r[0]=e[0]-n[0],r[1]=e[1]-n[1],r[2]=e[2]-n[2],r[3]=e[3]-n[3],r[4]=e[4]-n[4],r[5]=e[5]-n[5],r[6]=e[6]-n[6],r[7]=e[7]-n[7],r[8]=e[8]-n[8],r[9]=e[9]-n[9],r[10]=e[10]-n[10],r[11]=e[11]-n[11],r[12]=e[12]-n[12],r[13]=e[13]-n[13],r[14]=e[14]-n[14],r[15]=e[15]-n[15],r}function kr(r,e,n){return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=e[3]*n,r[4]=e[4]*n,r[5]=e[5]*n,r[6]=e[6]*n,r[7]=e[7]*n,r[8]=e[8]*n,r[9]=e[9]*n,r[10]=e[10]*n,r[11]=e[11]*n,r[12]=e[12]*n,r[13]=e[13]*n,r[14]=e[14]*n,r[15]=e[15]*n,r}function Hr(r,e,n,i){return r[0]=e[0]+n[0]*i,r[1]=e[1]+n[1]*i,r[2]=e[2]+n[2]*i,r[3]=e[3]+n[3]*i,r[4]=e[4]+n[4]*i,r[5]=e[5]+n[5]*i,r[6]=e[6]+n[6]*i,r[7]=e[7]+n[7]*i,r[8]=e[8]+n[8]*i,r[9]=e[9]+n[9]*i,r[10]=e[10]+n[10]*i,r[11]=e[11]+n[11]*i,r[12]=e[12]+n[12]*i,r[13]=e[13]+n[13]*i,r[14]=e[14]+n[14]*i,r[15]=e[15]+n[15]*i,r}function Zr(r,e){return r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2]&&r[3]===e[3]&&r[4]===e[4]&&r[5]===e[5]&&r[6]===e[6]&&r[7]===e[7]&&r[8]===e[8]&&r[9]===e[9]&&r[10]===e[10]&&r[11]===e[11]&&r[12]===e[12]&&r[13]===e[13]&&r[14]===e[14]&&r[15]===e[15]}function Xr(r,e){var n=r[0],i=r[1],a=r[2],v=r[3],s=r[4],c=r[5],x=r[6],h=r[7],l=r[8],f=r[9],m=r[10],p=r[11],d=r[12],t=r[13],M=r[14],b=r[15],w=e[0],S=e[1],y=e[2],g=e[3],z=e[4],R=e[5],A=e[6],E=e[7],L=e[8],I=e[9],O=e[10],N=e[11],P=e[12],G=e[13],Y=e[14],F=e[15];return Math.abs(n-w)<=T*Math.max(1,Math.abs(n),Math.abs(w))&&Math.abs(i-S)<=T*Math.max(1,Math.abs(i),Math.abs(S))&&Math.abs(a-y)<=T*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(v-g)<=T*Math.max(1,Math.abs(v),Math.abs(g))&&Math.abs(s-z)<=T*Math.max(1,Math.abs(s),Math.abs(z))&&Math.abs(c-R)<=T*Math.max(1,Math.abs(c),Math.abs(R))&&Math.abs(x-A)<=T*Math.max(1,Math.abs(x),Math.abs(A))&&Math.abs(h-E)<=T*Math.max(1,Math.abs(h),Math.abs(E))&&Math.abs(l-L)<=T*Math.max(1,Math.abs(l),Math.abs(L))&&Math.abs(f-I)<=T*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(m-O)<=T*Math.max(1,Math.abs(m),Math.abs(O))&&Math.abs(p-N)<=T*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(d-P)<=T*Math.max(1,Math.abs(d),Math.abs(P))&&Math.abs(t-G)<=T*Math.max(1,Math.abs(t),Math.abs(G))&&Math.abs(M-Y)<=T*Math.max(1,Math.abs(M),Math.abs(Y))&&Math.abs(b-F)<=T*Math.max(1,Math.abs(b),Math.abs(F))}var Qr=X,$r=o;function U(r){throw alert(r),new Error(r)}var C=document.getElementById("canvas"),_=C.getContext("webgl2");_||U("webgl2 is not supported");function u(){let r=window.devicePixelRatio,e=Math.round(C.clientWidth*r),n=Math.round(C.clientHeight*r);C.width=e,C.height=n,_.viewport(0,0,e,n)}u();window.addEventListener("resize",u);function rr(r,e,n){let i=r.createShader(e);if(r.shaderSource(i,n),r.compileShader(i),r.getShaderParameter(i,r.COMPILE_STATUS))return i;let v=r.getShaderInfoLog(i);r.deleteShader(i),U(`failed to compile shader:
${v}`)}function Kr(r,e,n){let i=r.createProgram();if(r.attachShader(i,e),r.attachShader(i,n),r.linkProgram(i),r.getProgramParameter(i,r.LINK_STATUS))return i;let v=r.getProgramInfoLog(i);r.deleteProgram(i),U(`failed to link program:
${v}`)}function Jr(r,e,n,i){i!==void 0&&r.bindVertexArray(i),r.bindBuffer(r.ARRAY_BUFFER,r.createBuffer()),r.bufferData(r.ARRAY_BUFFER,n.data,r.STATIC_DRAW),r.enableVertexAttribArray(e),r.vertexAttribPointer(e,n.size,n.type,n.normalized??!1,n.stride??0,n.offset??0),r.enableVertexAttribArray(e)}var or=rr(_,_.VERTEX_SHADER,H),ur=rr(_,_.FRAGMENT_SHADER,k),V=Kr(_,or,ur);_.useProgram(V);var W={attributes:{a_position:_.getAttribLocation(V,"a_position")},uniforms:{u_viewMatrix:_.getUniformLocation(V,"u_viewMatrix"),u_screenSize:_.getUniformLocation(V,"u_screenSize"),u_time:_.getUniformLocation(V,"u_time")}};_.uniform2f(W.uniforms.u_screenSize,.5,.5*C.height/C.width);var r1=_.createVertexArray();_.bindVertexArray(r1);Jr(_,W.attributes.a_position,{data:new Float32Array([-1,-1,-1,1,1,-1,1,1,1,-1,-1,1]),size:2,type:_.FLOAT});var e1=performance.now();function er(){let r=(performance.now()-e1)/1e3;_.uniform1f(W.uniforms.u_time,r),_.uniformMatrix4fv(W.uniforms.u_viewMatrix,!1,D.identity(D.create())),_.drawArrays(_.TRIANGLES,0,6),requestAnimationFrame(er)}requestAnimationFrame(er);
